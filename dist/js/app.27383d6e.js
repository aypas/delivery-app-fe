(function(t){function e(e){for(var a,o,i=e[0],l=e[1],u=e[2],c=0,d=[];c<i.length;c++)o=i[c],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);h&&h(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var i=n[o];0!==r[i]&&(a=!1)}a&&(s.splice(e--,1),t=l(l.s=n[0]))}return t}var a={},o={app:0},r={app:0},s=[];function i(t){return l.p+"js/"+({about:"about"}[t]||t)+"."+{about:"5215e2d4","chunk-2d0e8c9b":"41753432","chunk-6e2b3ae0":"1ad34330","chunk-ef9c98fa":"a3eae5cc"}[t]+".js"}function l(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(t){var e=[],n={"chunk-6e2b3ae0":1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var a="css/"+({about:"about"}[t]||t)+"."+{about:"31d6cfe0","chunk-2d0e8c9b":"31d6cfe0","chunk-6e2b3ae0":"5a43dd8c","chunk-ef9c98fa":"31d6cfe0"}[t]+".css",r=l.p+a,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],c=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===a||c===r))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],c=u.getAttribute("data-href");if(c===a||c===r)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var a=e&&e.target&&e.target.src||r,s=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete o[t],h.parentNode.removeChild(h),n(s)},h.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){o[t]=0})));var a=r[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,n){a=r[t]=[e,n]}));e.push(a[2]=s);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=i(t);var d=new Error;u=function(e){c.onerror=c.onload=null,clearTimeout(h);var n=r[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",d.name="ChunkLoadError",d.type=a,d.request=o,n[1](d)}r[t]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(e)},l.m=t,l.c=a,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)l.d(n,a,function(e){return t[e]}.bind(null,a));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/",l.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var h=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"024c":function(t,e,n){"use strict";var a=n("7c52"),o=n.n(a);o.a},"56d7":function(t,e,n){"use strict";n.r(e);var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("index")},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"inspire"}},[n("v-navigation-drawer",{attrs:{app:""},scopedSlots:t._u([{key:"append",fn:function(){return[t.isAuthenticated?n("div",{staticClass:"pa-2"},[n("v-btn",{staticClass:"white--text",attrs:{block:"",color:"indigo"},on:{click:t.logout}},[t._v("Logout")])],1):t._e()]},proxy:!0}]),model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},[n("router-link",{attrs:{to:"home"}},[n("v-list-item",{style:["/home"==t.path?{"background-color":"#BFBFBF"}:{}],attrs:{link:""}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-home")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Home ")])],1)],1)],1),t.isAuthenticated?n("div",[n("router-link",{attrs:{to:"dashboard"}},[n("v-list-item",{style:["/dashboard"==t.path?{"background-color":"#BFBFBF"}:{}],attrs:{link:""}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-desktop-mac-dashboard")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Dashboard")])],1)],1)],1)],1):t._e(),n("v-list-group",{attrs:{"prepend-icon":"mdi-navigation"},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("Quick Menu")])]},proxy:!0}])},[n("v-list-group",{attrs:{"no-action":"","sub-group":"","prepend-icon":"mdi-check-network-outline",disabled:""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[t._v("Status")])],1)]},proxy:!0}])}),n("v-list-group",{attrs:{"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[t._v("Orders")])],1)]},proxy:!0}])},t._l(t.orders,(function(e,a){return n("v-list-item",{key:a,attrs:{link:""}},[n("v-list-item-title",{domProps:{textContent:t._s(e[0])}}),n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s(e[1])}})],1)],1)})),1),n("v-list-group",{attrs:{value:"true","no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[t._v("Earnings")])],1)]},proxy:!0}])},t._l(t.earnings,(function(e,a){return n("v-list-item",{key:a,attrs:{link:""}},[n("v-list-item-title",{domProps:{textContent:t._s(e[0])}}),n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s(e[1])}})],1)],1)})),1),n("v-list-group",{attrs:{"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[t._v("Manager Actions")])],1)]},proxy:!0}])},t._l(t.manActions,(function(e,a){return n("v-list-item",{key:a,attrs:{link:"",to:e.link}},[n("v-list-item-title",[t._v(t._s(e.text))]),n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s(e.icon)}})],1)],1)})),1)],1),t.authUser.email&&t.isAuthenticated?n("div",[n("v-list-item",{attrs:{link:""}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-account")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Account")])],1)],1)],1):t._e(),!t.isAuthenticated&&t.authUser?n("div",[n("router-link",{attrs:{to:"/signin"}},[n("v-list-item",{style:["/signin"==t.path?{"background-color":"#BFBFBF"}:{}],attrs:{link:""}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-login-variant")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Sign In")])],1)],1)],1)],1):t._e(),n("v-list-item",{attrs:{link:""}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-contact-mail")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Contact")])],1)],1)],1)],1),n("v-app-bar",{attrs:{app:"",color:"indigo",dark:""}},[n("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),n("v-toolbar-title",[t._v("Delivery-App")])],1),n("v-content",[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{staticClass:"text-center"},[n("v-tooltip",{attrs:{left:""}}),n("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(t){t.on;return[n("keep-alive",[n("router-view")],1)]}}])},[n("span",[t._v("Codepen")])])],1)],1)],1)],1),n("v-footer",{attrs:{color:"indigo",app:""}},[n("span",{staticClass:"white--text"},[t._v("Â© 2019")])])],1)},i=[],l={name:"Index",data:()=>({quickSelect:null,drawer:!1,orders:[["Pending","mdi-arrow-decision"],["Current","mdi-account-clock"],["Completed","mdi-check"]],earnings:[["Daily","mdi-calendar-today"],["Custom Period","mdi-calendar-month-outline"]],manActions:[{text:"Settings",icon:"",link:"/settings"},{text:"Node",icon:"",link:"/node"}]}),computed:{path(){return this.$route.path},isAuthenticated(){return this.$store.state.auth.isAuthenticated},authUser(){return this.$store.state.auth}},methods:{logout(){console.log("logout"),this.$router.push("home"),this.$store.commit("auth/removeAllCreds")}},watch:{drawer(){return console.log(this.$route.path),null}}},u=l,c=(n("024c"),n("2877")),d=n("6544"),h=n.n(d),p=n("7496"),m=n("40dc"),v=n("5bc1"),g=n("8336"),f=n("62ad"),b=n("a523"),_=n("a75b"),y=n("553a"),k=n("132d"),w=n("8860"),S=n("56b0"),x=n("da13"),A=n("1800"),C=n("5d23"),j=n("34c3"),O=n("f774"),$=n("0fd9"),V=n("2a7f"),T=n("3a2f"),U=Object(c["a"])(u,s,i,!1,null,null,null),q=U.exports;h()(U,{VApp:p["a"],VAppBar:m["a"],VAppBarNavIcon:v["a"],VBtn:g["a"],VCol:f["a"],VContainer:b["a"],VContent:_["a"],VFooter:y["a"],VIcon:k["a"],VList:w["a"],VListGroup:S["a"],VListItem:x["a"],VListItemAction:A["a"],VListItemContent:C["a"],VListItemIcon:j["a"],VListItemTitle:C["c"],VNavigationDrawer:O["a"],VRow:$["a"],VToolbarTitle:V["a"],VTooltip:T["a"]});var E={name:"App",components:{Index:q}},P=E,I=Object(c["a"])(P,o,r,!1,null,null,null),L=I.exports,N=n("8c4f"),B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("p",[t._v(t._s(t.num))]),n("p",[t._v(t._s(t.j))]),n("p",[t._v(" ist "+t._s(t.isAuthenticated))]),n("p",[t._v("ff"+t._s(t.authUser)+"f")]),n("button",{on:{click:t.add}},[t._v("add")])])},F=[],D={name:"home",data(){return{msg:"hello"}},computed:{num(){return console.log(this.$store.state.auth.num),this.$store.state.auth.num},j(){return this.$store.state.jwt},isAuthenticated(){return this.$store.state.auth.isAuthenticated},authUser(){return this.$store.state.auth.authUser}},methods:{add(){this.$store.commit("auth/add")}},mounted(){console.log(this.$store.state.auth.isAuthenticated,"rag")}},J=D,M=Object(c["a"])(J,B,F,!1,null,null,null),R=M.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n(t.msg?"orders":"null",{tag:"component"})],1)},H=[],Q=n("bc3a"),K=n.n(Q),W=n("2f62");const G={authUser:{id:0,is_active:null,email:"",name:"",created:"",is_node_owner:null,status:"",on_shift:null,is_manager:null},isAuthenticated:!1,jwt:"",refreshToken:"",loginErr:""},X=Object.assign({},G),Y={getAuthUser(t){return t.authUser},getIsAuthenticated(t){return t.isAuthenticated},getJWT(t){return t.jwt},getRefresh(t){return t.refreshToken},getNum(t){return t.num}},Z={initializeStore(t){console.log("kaka",t),localStorage.getItem("state")&&(Object.assign(t,JSON.parse(localStorage.getItem("state"))),console.log(t),t.isAuthenticated=!0)},setAuthUser(t,e){console.log(t,e),console.log("pls make true",t.isAuthenticated),t.authUser={...e},t.isAuthenticated=!0,console.log(!!e)},add(t){t.num++},addTokens(t,e){console.log("addTokens..",e.token,t),t.jwt=e.token.access,t.refreshToken=e.token.refresh},refresh(t,e){console.log(t,e),e.hasOwnProperty("access")?(t.jwt=e.access,console.log("has")):e.hasProperty("refresh")&&console.log("sheeeeeeit")},removeAllCreds(t){console.log(t);for(let e in t)t[e]=G[e];localStorage.removeItem("state")},loginErr(t,e){t.loginErr=e?"":"An account with the given credentials does not exist."}},tt={login({commit:t},e){ut.post("/api/auth/token/",{email:e.email,password:e.password}).then(e=>(t("addTokens",{token:e.data}),!0)).catch(e=>(t("loginErr"),console.log(e),!1)).then(e=>{e&&ut.get("api/auth/user/").then(e=>{t("setAuthUser",e.data),$t.push("/dashboard")}).catch(e=>{console.log(e,"big error"),t("loginErr",!0)})})},signUp({commit:t},e){console.log(e),ut.post("/api/auth/signup/",{payload:e}).then(e=>{console.log(e,`${t}`)}).catch(t=>{console.log("you done fucked up",t)})},oauth(){ut.get("api/auth/oauth/").then(t=>{window.location.href=t.data.url})}},et={namespaced:!0,state:X,getters:Y,actions:tt,mutations:Z},nt={data:[],lastUpdated:""},at={getData(t){return t.data},getLastUpdated(t){return t.lastUpdated}},ot={mutateData(t,e){t.data=e;let n=new Date;t.lastUpdated=n.toLocaleTimeString()}},rt={apiOrders({commit:t},e){console.log("does it run?"),ut.get(`api/core/orders/${Object.entries(e).length?`?${encodeURIComponent(JSON.stringify(e))}`:""}`).then(e=>{t("mutateData",e.data)}).catch(t=>{console.log(t)})}},st={namespaced:!0,state:nt,getters:at,mutations:ot,actions:rt};a["a"].use(W["a"]);const it=t=>{t.subscribe((t,e)=>{"auth/setAuthUser"!=t.type&&"auth/refresh"!=t.type||localStorage.setItem("state",JSON.stringify(e.auth))})},lt=new W["a"].Store({plugins:[it],modules:{auth:et,orders:st}});K.a.defaults.xsrfHeaderName="X-CSRFTOKEN",K.a.defaults.xsrfCookieName="csrftoken",K.a.defaults.headers.common["Content-Type"]="application/json";const ut=K.a.create({baseURL:"http://api.a-delivery.tk",timeout:1750});ut.interceptors.response.use((function(t){return t}),(function(t){return console.log(t),401==t.response.status&&lt.state.auth.refreshToken&&(console.log("request to refresh has been sent..."),ut.post("api/auth/token/refresh/",{refresh:lt.state.auth.refreshToken}).then(t=>(console.log(t.data,"this is the refresh data"),lt.commit("auth/refresh",t.data),!0)).catch(t=>("undefined"===t.response&&$t.push("home?q=unknown-error"),401==t.response.status&&(lt.commit("auth/removeAllCreds"),console.log("if navigation guard doesnt fail here it might be good in general!!!"),$t.push("/?q=SesionExpired")),!1))),Promise.reject(t)})),ut.interceptors.request.use((function(t){return lt.state.auth.jwt&&(t.headers.Authorization=`JWT ${lt.state.auth.jwt}`),t}),(function(t){return Promise.reject(t)}));var ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-container",{staticClass:"thing2"},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-card",[n("v-layout",[n("v-flex",{attrs:{xs3:""}},[n("v-card",{attrs:{height:"100%"}},[n("v-card-title",{staticClass:"justify-center"},[t._v("Options")]),n("v-card-text",[n("v-card-subtitle",{staticClass:"text-left pl-0 ml-0 pb-1"},[t._v("last updated: "+t._s(t.lastUpdated)+" "),n("v-icon",{on:{click:t.updateOrders}},[t._v("mdi-refresh")])],1),n("v-switch",{attrs:{label:"unassigned"},model:{value:t.queryString.assigned_to__isnull,callback:function(e){t.$set(t.queryString,"assigned_to__isnull",e)},expression:"queryString.assigned_to__isnull"}}),n("v-switch",{attrs:{label:"complete"},model:{value:t.queryString.complete,callback:function(e){t.$set(t.queryString,"complete",e)},expression:"queryString.complete"}}),n("v-switch",{attrs:{label:"in progress"},model:{value:t.queryString.in_progress,callback:function(e){t.$set(t.queryString,"in_progress",e)},expression:"queryString.in_progress"}}),n("v-select",{attrs:{items:[1,2,3],label:"store"},model:{value:t.queryString.store,callback:function(e){t.$set(t.queryString,"store",e)},expression:"queryString.store"}})],1)],1)],1),n("v-flex",{attrs:{xs9:""}},[n("v-card",{attrs:{height:"100%"}},[n("v-card-title",{staticClass:"justify-center"},[t._v("world")]),n("v-card-text",[n("v-data-table",{attrs:{items:t.data,"item-key":t.data.id,headers:t.headers,"items-per-page":10},scopedSlots:t._u([{key:"item.deliver_by",fn:function(e){var a=e.item;return[n("span",[t._v(t._s(new Date(a.deliver_by).toLocaleTimeString().slice(0,4)))])]}}])})],1)],1)],1)],1)],1)],1)],1)],1),t._v(" "+t._s(t.lastUpdated)+" "),t._l(t.data,(function(e,a){return n("div",{key:a},[n("p",[t._v(t._s(e))])])}))],2)},dt=[],ht={data(){return{t:0,queryString:{assigned_to__isnull:!0,complete:!1,in_progress:!1,store:null},headers:[{text:"store",value:"store"},{text:"address",value:"address"},{text:"delivery by",value:"deliver_by"},{text:"fee",value:"delivery_fee"},{text:"tip",value:"tip"}]}},computed:{data(){return console.log(this.$store.state.orders.data),this.$store.state.orders.data},lastUpdated(){return this.$store.state.orders.lastUpdated}},methods:{genQueryString(){return this.queryString.store||delete this.queryString.store,this.queryString},updateOrders(){this.$store.dispatch("orders/apiOrders",this.genQueryString())}},created(){this.updateOrders()}},pt=ht,mt=n("b0af"),vt=n("99d9"),gt=n("8fea"),ft=n("0e8f"),bt=n("a722"),_t=n("b974"),yt=n("b73d"),kt=Object(c["a"])(pt,ct,dt,!1,null,null,null),wt=kt.exports;h()(kt,{VCard:mt["a"],VCardSubtitle:vt["a"],VCardText:vt["b"],VCardTitle:vt["c"],VContainer:b["a"],VDataTable:gt["a"],VFlex:ft["a"],VIcon:k["a"],VLayout:bt["a"],VSelect:_t["a"],VSwitch:yt["a"]});var St={data(){return{msg:"dash"}},computed:{t(){return this.$store.state.auth.jwt?this.$store.state.auth.jwt.slice(-10):null},quickSelect(){return this.$routes.params}},methods:{check(){console.log(this.r),ut.get("api/auth/users/").then(t=>{console.log(t)}).catch(t=>{console.log(t.response,"und")})}},components:{Orders:wt}},xt=St,At=Object(c["a"])(xt,z,H,!1,null,null,null),Ct=At.exports;h()(At,{VApp:p["a"]}),a["a"].use(N["a"]);const jt=[{path:"/",name:"home",component:R},{path:"/dashboard",name:"dashboard",component:Ct},{path:"/signin",name:"signin",component:()=>n.e("chunk-6e2b3ae0").then(n.bind(null,"54e2"))},{path:"/sign-up",name:"signup",component:()=>n.e("chunk-ef9c98fa").then(n.bind(null,"5c9c"))},{path:"/about",name:"about",component:()=>n.e("about").then(n.bind(null,"f820"))},{path:"/node",name:"node",component:()=>n.e("chunk-2d0e8c9b").then(n.bind(null,"8b83"))}],Ot=new N["a"]({mode:"history",base:"/",routes:jt});Ot.beforeEach((t,e,n)=>{let a=JSON.parse(localStorage.getItem("state"));console.log(a,"popop"),null!=a||["signin","about","home","signup"].includes(t.name)?null==a&&["signin","about","home","signup"].includes(t.name)?n():a.isAuthenticated||["signin","about","home","signup"].includes(t.name)?a.isAuthenticated&&"signin"==t.name?(console.log("i should see this"),n("/dashboard")):n():n("/signin"):(console.log("sdfsdf44"),n("/signin"))});var $t=Ot,Vt=n("f309");a["a"].use(Vt["a"]);var Tt=new Vt["a"]({});a["a"].config.productionTip=!0,new a["a"]({router:$t,store:lt,vuetify:Tt,render:t=>t(L)}).$mount("#app"),(()=>{lt.commit("auth/initializeStore")})()},"7c52":function(t,e,n){}});
//# sourceMappingURL=app.27383d6e.js.map